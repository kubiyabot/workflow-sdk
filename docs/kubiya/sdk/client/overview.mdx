---
title: "Kubiya Client SDK"
description: "Complete Python client for Kubiya Platform APIs"
icon: "code"
---

The Kubiya Client SDK provides a comprehensive Python interface to all Kubiya platform services. Use it to programmatically manage agents, workflows, integrations, and more.

## Installation

```bash
pip install kubiya-sdk
```

## Quick Start

```python
from kubiya_sdk import Kubiya

# Initialize client
client = Kubiya(
    api_key="your-api-key",
    organization="your-org",
    base_url="https://api.kubiya.ai"
)

# Create an agent
agent = client.agents.create({
    "name": "DevOps Helper",
    "description": "Automated DevOps operations",
    "model": "gpt-4-turbo",
    "tools": ["kubernetes", "docker", "github"]
})

# Execute a workflow
result = client.workflows.execute(
    workflow_id="wf_123",
    inputs={"environment": "production"}
)
```

## Client Services

The SDK provides access to all Kubiya platform services:

### Core Services

<CardGroup cols={2}>
  <Card title="Agents" icon="robot">
    Create and manage AI agents with custom capabilities
  </Card>
  <Card title="Workflows" icon="diagram-project">
    Execute and manage automation workflows
  </Card>
  <Card title="Tools" icon="wrench">
    Register and manage custom tools
  </Card>
  <Card title="Runners" icon="server">
    Deploy and manage execution runners
  </Card>
</CardGroup>

### Integration Services

<CardGroup cols={2}>
  <Card title="Integrations" icon="plug">
    Connect to external services and APIs
  </Card>
  <Card title="Sources" icon="folder">
    Manage code repositories and data sources
  </Card>
  <Card title="Secrets" icon="key">
    Secure credential and configuration management
  </Card>
  <Card title="Webhooks" icon="webhook">
    Handle external event notifications
  </Card>
</CardGroup>

### Management Services

<CardGroup cols={2}>
  <Card title="Projects" icon="folder-tree">
    Organize resources into projects
  </Card>
  <Card title="Users" icon="users">
    User and team management
  </Card>
  <Card title="Policies" icon="shield">
    Security and access control
  </Card>
  <Card title="Audit" icon="file-text">
    Activity logging and compliance
  </Card>
</CardGroup>

### Knowledge Services

<CardGroup cols={2}>
  <Card title="Knowledge" icon="brain">
    Manage knowledge bases and documentation
  </Card>
  <Card title="Documentation" icon="book">
    Auto-generated documentation and guides
  </Card>
  <Card title="Triggers" icon="bolt">
    Event-driven automation triggers
  </Card>
  <Card title="Stacks" icon="layer-group">
    Infrastructure as Code management
  </Card>
</CardGroup>

## Service Examples

### Agent Management

```python
# List all agents
agents = client.agents.list()

# Get specific agent
agent = client.agents.get("agent_123")

# Update agent configuration
client.agents.update("agent_123", {
    "model": "gpt-4-turbo",
    "temperature": 0.7,
    "tools": ["kubernetes", "docker", "github", "slack"]
})

# Delete agent
client.agents.delete("agent_123")
```

### Workflow Execution

```python
# Create workflow from natural language
workflow = client.workflows.create_from_description(
    description="Deploy frontend service to staging with health checks",
    tools=["kubernetes", "github", "slack"]
)

# Execute workflow
execution = client.workflows.execute(
    workflow_id=workflow.id,
    inputs={
        "service_name": "frontend",
        "version": "v1.2.0",
        "environment": "staging"
    },
    wait=True  # Wait for completion
)

# Monitor execution
status = client.workflows.get_execution_status(execution.id)
logs = client.workflows.get_execution_logs(execution.id)
```

### Integration Management

```python
# Add new integration
integration = client.integrations.create({
    "name": "Production Kubernetes",
    "type": "kubernetes",
    "config": {
        "kubeconfig": "/path/to/kubeconfig",
        "context": "prod-cluster"
    }
})

# List available integrations
integrations = client.integrations.list(active_only=True)

# Test integration connectivity
test_result = client.integrations.test("integration_123")
```

### Secrets Management

```python
# Store secret
client.secrets.create({
    "name": "github_token",
    "value": "ghp_xxxxxxxxxxxx",
    "description": "GitHub API token for CI/CD"
})

# Retrieve secret (returns reference, not value)
secret_ref = client.secrets.get("github_token")

# List secrets
secrets = client.secrets.list()

# Update secret
client.secrets.update("github_token", {
    "value": "new_token_value",
    "expires_at": "2024-12-31T23:59:59Z"
})
```

### Knowledge Management

```python
# Create knowledge base
kb = client.knowledge.create({
    "name": "DevOps Runbooks",
    "description": "Standard operating procedures",
    "sources": [
        {"type": "github", "url": "https://github.com/company/runbooks"},
        {"type": "confluence", "space": "DevOps"}
    ]
})

# Add documentation
doc = client.knowledge.add_document(
    knowledge_base_id=kb.id,
    title="Kubernetes Deployment Guide",
    content="Step-by-step deployment procedures...",
    tags=["kubernetes", "deployment", "production"]
)

# Search knowledge
results = client.knowledge.search(
    query="how to rollback deployment",
    knowledge_base_id=kb.id,
    limit=10
)
```

### Project Organization

```python
# Create project
project = client.projects.create({
    "name": "E-commerce Platform",
    "description": "Production e-commerce automation",
    "team": "platform-engineering"
})

# Add resources to project
client.projects.add_resources(project.id, {
    "agents": ["agent_123", "agent_456"],
    "workflows": ["wf_789"],
    "integrations": ["int_001", "int_002"]
})

# Get project overview
overview = client.projects.get_overview(project.id)
```

## Advanced Features

### Async Support

```python
import asyncio
from kubiya_sdk import AsyncKubiya

async def main():
    async_client = AsyncKubiya(api_key="your-api-key")
    
    # Execute multiple workflows concurrently
    tasks = [
        async_client.workflows.execute("wf_1", {"env": "staging"}),
        async_client.workflows.execute("wf_2", {"env": "production"}),
        async_client.workflows.execute("wf_3", {"env": "development"})
    ]
    
    results = await asyncio.gather(*tasks)
    
    for result in results:
        print(f"Workflow {result.id}: {result.status}")

asyncio.run(main())
```

### Pagination

```python
# Handle large result sets
all_agents = []
page_token = None

while True:
    response = client.agents.list(
        page_size=100,
        page_token=page_token
    )
    
    all_agents.extend(response.agents)
    
    if not response.next_page_token:
        break
        
    page_token = response.next_page_token

print(f"Total agents: {len(all_agents)}")
```

### Error Handling

```python
from kubiya_sdk.exceptions import (
    KubiyaAPIError,
    AuthenticationError,
    RateLimitError,
    ResourceNotFoundError
)

try:
    agent = client.agents.get("non_existent_agent")
except ResourceNotFoundError:
    print("Agent not found")
except AuthenticationError:
    print("Invalid API key")
except RateLimitError as e:
    print(f"Rate limited. Retry after {e.retry_after} seconds")
except KubiyaAPIError as e:
    print(f"API error: {e.message} (status: {e.status_code})")
```

### Webhooks

```python
# Register webhook for workflow completion
webhook = client.webhooks.create({
    "name": "workflow-completion",
    "url": "https://myapp.com/webhook/kubiya",
    "events": ["workflow.completed", "workflow.failed"],
    "secret": "webhook_secret_key"
})

# Verify webhook signature (in your webhook handler)
from kubiya_sdk.webhooks import verify_signature

def handle_webhook(request):
    signature = request.headers.get('X-Kubiya-Signature')
    payload = request.body
    
    if verify_signature(payload, signature, "webhook_secret_key"):
        # Process webhook
        event_data = request.json()
        print(f"Received event: {event_data['type']}")
    else:
        print("Invalid webhook signature")
```

## Configuration

### Environment Variables

```bash
export KUBIYA_API_KEY="your-api-key"
export KUBIYA_ORG="your-organization"
export KUBIYA_BASE_URL="https://api.kubiya.ai"
```

### Configuration File

```yaml
# ~/.kubiya/config.yaml
api_key: your-api-key
organization: your-organization
base_url: https://api.kubiya.ai
timeout: 30
retry_attempts: 3
```

### Client Options

```python
client = Kubiya(
    api_key="your-api-key",
    organization="your-org",
    base_url="https://api.kubiya.ai",
    timeout=60,  # Request timeout in seconds
    retry_attempts=3,  # Number of retry attempts
    retry_delay=1.0,  # Delay between retries
    max_retry_delay=10.0,  # Maximum retry delay
    user_agent="MyApp/1.0"  # Custom user agent
)
```

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Workflow DSL →"
    href="/sdk/workflow-dsl/overview"
    icon="diagram-project"
  >
    Learn how to define workflows as code
  </Card>
  <Card
    title="Tools SDK →"
    href="/sdk/tools/overview" 
    icon="wrench"
  >
    Create custom tools for your automation needs
  </Card>
  <Card
    title="API Reference →"
    href="/api-reference/platform/overview"
    icon="book"
  >
    Complete API documentation with all endpoints
  </Card>
  <Card
    title="Examples →"
    href="/sdk/examples"
    icon="code"
  >
    Real-world SDK usage examples and patterns
  </Card>
</CardGroup>